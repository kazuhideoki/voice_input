# Phase 3: åŸºæœ¬ãƒšãƒ¼ã‚¹ãƒˆæ©Ÿèƒ½ï¼†ã‚¹ã‚¿ãƒƒã‚¯ç®¡ç†ã‚³ãƒãƒ³ãƒ‰å®Œæˆ è©³ç´°è¨­è¨ˆæ›¸

## Why

### Phase æ¦‚è¦

Phase 3ã¯ã€ãƒãƒ«ãƒã‚¹ã‚¿ãƒƒã‚­ãƒ³ã‚°æ©Ÿèƒ½ã®**å®Ÿç”¨æ€§ç¢ºç«‹**ãƒ•ã‚§ãƒ¼ã‚ºã§ã™ã€‚Phase 2ã§æ§‹ç¯‰ã•ã‚ŒãŸåŸºç›¤ä¸Šã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå®Ÿéš›ã«ã‚¹ã‚¿ãƒƒã‚¯æ©Ÿèƒ½ã‚’åŠ¹ç‡çš„ã«æ´»ç”¨ã§ãã‚‹ã‚ˆã†ã€**åŸºæœ¬ãƒšãƒ¼ã‚¹ãƒˆæ©Ÿèƒ½ã®å®Œæˆ**ã¨**ã‚¹ã‚¿ãƒƒã‚¯ç®¡ç†ã‚³ãƒãƒ³ãƒ‰ã®å“è³ªå‘ä¸Š**ã‚’å®Ÿç¾ã—ã¾ã™ã€‚

### ç›®çš„

1. **åŸºæœ¬ãƒšãƒ¼ã‚¹ãƒˆæ©Ÿèƒ½ã®å®Œæˆ**: ç•ªå·æŒ‡å®šã«ã‚ˆã‚‹ç¢ºå®Ÿãªã‚¹ã‚¿ãƒƒã‚¯ãƒšãƒ¼ã‚¹ãƒˆæ©Ÿèƒ½ã‚’å®Ÿç¾
2. **ã‚¹ã‚¿ãƒƒã‚¯ç®¡ç†ã®å®Œå…¨å®Ÿè£…**: ä¸€è¦§è¡¨ç¤ºãƒ»ã‚¯ãƒªã‚¢ãƒ»çŠ¶æ…‹ç®¡ç†ã®å®Œæˆåº¦å‘ä¸Š
3. **ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ã®å‘ä¸Š**: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ»ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ»æ“ä½œæ€§ã®æ”¹å–„
4. **å“è³ªä¿è¨¼ã®ç¢ºç«‹**: åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ»å®‰å®šæ€§ã®ç¢ºä¿
5. **Production ReadyåŒ–**: å®Ÿéš›ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§ä½¿ç”¨å¯èƒ½ãªå“è³ªãƒ¬ãƒ™ãƒ«ã¸åˆ°é”

## What

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    User Workflow (Phase 3)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. Stack Mode Activation                                       â”‚
â”‚     voice_input stack-mode on                                   â”‚
â”‚                                                                 â”‚
â”‚  2. Voice Input & Auto-Save (from Phase 2)                     â”‚
â”‚     voice_input start â†’ [Audio] â†’ [Transcription] â†’ [Stack 1]  â”‚
â”‚     voice_input start â†’ [Audio] â†’ [Transcription] â†’ [Stack 2]  â”‚
â”‚                                                                 â”‚
â”‚  3. Stack Management (Phase 3 Focus)                           â”‚
â”‚     voice_input list-stacks â†’ Preview all stacks               â”‚
â”‚     voice_input paste 2 â†’ Direct text input                    â”‚
â”‚     voice_input clear-stacks â†’ Clean all stacks                â”‚
â”‚                                                                 â”‚
â”‚  4. Stack Mode Deactivation                                    â”‚
â”‚     voice_input stack-mode off                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Technical Architecture                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   CLI Commands    â”‚    â”‚        Enhanced Features        â”‚   â”‚
â”‚  â”‚                   â”‚    â”‚                                 â”‚   â”‚
â”‚  â”‚ âœ… paste <number> â”‚â”€â”€â”€â–¶â”‚ âœ… Error validation             â”‚   â”‚
â”‚  â”‚ âœ… list-stacks    â”‚    â”‚ âœ… Preview formatting           â”‚   â”‚
â”‚  â”‚ âœ… clear-stacks   â”‚    â”‚ âœ… User feedback               â”‚   â”‚
â”‚  â”‚ âœ… stack-mode     â”‚    â”‚ âš¡ Performance optimization      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚           â”‚                              â”‚                      â”‚
â”‚           â”‚ IPC (Unix Socket)            â”‚                      â”‚
â”‚           â–¼                              â–¼                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Daemon Processing                              â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ Stack Service   â”‚    â”‚    Text Input Integration      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                 â”‚    â”‚                                 â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ âœ… CRUD Ops     â”‚â”€â”€â”€â–¶â”‚ âœ… enigo library               â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ âœ… Mode Control â”‚    â”‚ âœ… Direct typing               â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ âœ… Validation   â”‚    â”‚ âœ… Error handling              â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
src/
â”œâ”€â”€ main.rs                           # æ—¢å­˜: ã‚¹ã‚¿ãƒƒã‚¯CLIã‚³ãƒãƒ³ãƒ‰å®Ÿè£…æ¸ˆã¿
â”œâ”€â”€ bin/
â”‚   â””â”€â”€ voice_inputd.rs               # æ—¢å­˜: StackServiceçµ±åˆæ¸ˆã¿
â”œâ”€â”€ application/                      # æ—¢å­˜: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤
â”‚   â”œâ”€â”€ mod.rs                        # æ—¢å­˜
â”‚   â””â”€â”€ stack_service.rs              # æ—¢å­˜: CRUDæ“ä½œå®Ÿè£…æ¸ˆã¿
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ mod.rs                        # æ—¢å­˜
â”‚   â””â”€â”€ stack.rs                      # æ—¢å­˜: Stack, StackInfoå®šç¾©æ¸ˆã¿
â”œâ”€â”€ infrastructure/
â”‚   â”œâ”€â”€ external/
â”‚   â”‚   â””â”€â”€ text_input.rs            # æ—¢å­˜: type_texté–¢æ•°æ´»ç”¨
â”‚   â””â”€â”€ ...
â”œâ”€â”€ ipc.rs                            # æ—¢å­˜: ã‚¹ã‚¿ãƒƒã‚¯é–¢é€£IPCå®Ÿè£…æ¸ˆã¿
â””â”€â”€ lib.rs

tests/                                # Phase 3: ãƒ†ã‚¹ãƒˆå¼·åŒ–
â”œâ”€â”€ e2e/
â”‚   â”œâ”€â”€ stack_workflow_test.rs        # æ–°è¦: E2Eãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ†ã‚¹ãƒˆ
â”‚   â””â”€â”€ performance_test.rs           # æ‹¡å¼µ: ã‚¹ã‚¿ãƒƒã‚¯æ€§èƒ½ãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ integration/
â”‚   â”œâ”€â”€ paste_functionality_test.rs   # æ–°è¦: ãƒšãƒ¼ã‚¹ãƒˆæ©Ÿèƒ½çµ±åˆãƒ†ã‚¹ãƒˆ
â”‚   â””â”€â”€ stack_management_test.rs      # æ–°è¦: ç®¡ç†ã‚³ãƒãƒ³ãƒ‰çµ±åˆãƒ†ã‚¹ãƒˆ
â””â”€â”€ unit/
    â””â”€â”€ stack_service_edge_cases.rs  # æ–°è¦: ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ
```

### ãƒ•ãƒ­ãƒ¼å›³

```mermaid
sequenceDiagram
    participant U as User
    participant CLI as voice_input CLI
    participant D as voice_inputd
    participant SS as StackService
    participant TI as TextInput

    Note over U,TI: Phase 3 Complete Workflow

    Note over U,TI: Setup Phase
    U->>CLI: voice_input stack-mode on
    CLI->>D: EnableStackMode
    D->>SS: enable_stack_mode()
    SS-->>D: mode_enabled = true
    D-->>CLI: Success response
    CLI-->>U: "Stack mode enabled"

    Note over U,TI: Voice Input Phase (Phase 2 Integration)
    U->>CLI: voice_input start
    CLI->>D: StartRecording
    Note over D: [Audio Recording & Transcription]
    D->>SS: save_stack(transcribed_text)
    SS-->>D: stack_id = 1
    D-->>U: "Stack 1 saved: transcribed preview..."

    U->>CLI: voice_input start
    CLI->>D: StartRecording
    Note over D: [Audio Recording & Transcription]
    D->>SS: save_stack(transcribed_text)
    SS-->>D: stack_id = 2
    D-->>U: "Stack 2 saved: transcribed preview..."

    Note over U,TI: Stack Management Phase (Phase 3 Focus)
    U->>CLI: voice_input list-stacks
    CLI->>D: ListStacks
    D->>SS: list_stacks()
    SS-->>D: Vec<StackInfo>
    D-->>CLI: Formatted stack list
    CLI-->>U: Display:
    Note right of CLI: [1] First transcribed text pre...
    Note right of CLI: [2] Second transcribed text pr...

    Note over U,TI: Paste Operations (Phase 3 Core)
    U->>CLI: voice_input paste 2
    CLI->>D: PasteStack{number: 2}
    D->>SS: get_stack(2)
    SS-->>D: Some(Stack{text: "Second transcribed text"})
    D->>TI: type_text("Second transcribed text")
    TI-->>U: [Direct text input to active application]
    D-->>CLI: Success response
    CLI-->>U: "âœ… Pasted stack 2"

    Note over U,TI: Error Handling (Phase 3 Enhancement)
    U->>CLI: voice_input paste 99
    CLI->>D: PasteStack{number: 99}
    D->>SS: get_stack(99)
    SS-->>D: None
    D-->>CLI: Error response
    CLI-->>U: "âŒ Stack 99 not found. Available: 1-2"

    Note over U,TI: Cleanup Phase
    U->>CLI: voice_input clear-stacks
    CLI->>D: ClearStacks
    D->>SS: clear_stacks()
    SS-->>D: stacks cleared
    D-->>CLI: Success response
    CLI-->>U: "âœ… All stacks cleared"

    U->>CLI: voice_input stack-mode off
    CLI->>D: DisableStackMode
    D->>SS: disable_stack_mode()
    SS-->>D: mode disabled, data cleared
    D-->>CLI: Success response
    CLI-->>U: "Stack mode disabled"
```

### æˆæœç‰©ï¼ˆæ©Ÿèƒ½ã€éæ©Ÿèƒ½ï¼‰

#### æ©Ÿèƒ½è¦ä»¶

##### 1. åŸºæœ¬ãƒšãƒ¼ã‚¹ãƒˆæ©Ÿèƒ½ (S3-1)

```rust
// Phase 3: ãƒšãƒ¼ã‚¹ãƒˆæ©Ÿèƒ½ã®å®Œæˆå½¢
pub async fn handle_paste_stack(
    number: u32,
    stack_service: &Arc<Mutex<StackService>>,
) -> Result<IpcResp, String> {
    let service = stack_service.lock().map_err(|e| e.to_string())?;
    
    // Phase 3: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–
    if !service.is_stack_mode_enabled() {
        return Ok(IpcResp {
            ok: false,
            msg: "âŒ Stack mode is not enabled. Run 'voice_input stack-mode on' first.".to_string(),
        });
    }
    
    match service.get_stack(number) {
        Some(stack) => {
            // Phase 3: å®Ÿéš›ã®ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›
            text_input::type_text(&stack.text, true).await
                .map_err(|e| format!("Failed to type text: {}", e))?;
            
            Ok(IpcResp {
                ok: true,
                msg: format!("âœ… Pasted stack {} ({} chars)", number, stack.text.len()),
            })
        }
        None => {
            // Phase 3: å»ºè¨­çš„ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
            let available = service.list_stacks()
                .iter()
                .map(|info| info.number.to_string())
                .collect::<Vec<_>>()
                .join(", ");
            
            Ok(IpcResp {
                ok: false,
                msg: format!("âŒ Stack {} not found. Available stacks: {}", number, available),
            })
        }
    }
}
```

**æ©Ÿèƒ½ç‰¹å¾´**:
- âœ… 1-99ç•ªã¾ã§ã®ç•ªå·æŒ‡å®šãƒšãƒ¼ã‚¹ãƒˆå¯¾å¿œ
- âœ… å­˜åœ¨ãƒã‚§ãƒƒã‚¯ãƒ»ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- âœ… ãƒ†ã‚­ã‚¹ãƒˆé•·ã•è¡¨ç¤ºãƒ»æ“ä½œç¢ºèª
- âœ… åˆ©ç”¨å¯èƒ½ç•ªå·ã®è¦ªåˆ‡è¡¨ç¤º

##### 2. ã‚¹ã‚¿ãƒƒã‚¯ç®¡ç†ã‚³ãƒãƒ³ãƒ‰ (S3-2)

```rust
// Phase 3: ç®¡ç†ã‚³ãƒãƒ³ãƒ‰ã®å®Œæˆå½¢
impl StackService {
    /// Phase 3: ä¸€è¦§è¡¨ç¤ºã®å¼·åŒ–
    pub fn list_stacks_formatted(&self) -> String {
        if self.stacks.is_empty() {
            return "ğŸ“ No stacks saved. Use 'voice_input start' to create stacks.".to_string();
        }
        
        let mut output = format!("ğŸ“š {} stack(s) in memory:\n", self.stacks.len());
        
        for info in self.list_stacks() {
            output.push_str(&format!(
                "  [{}] {} ({})\n",
                info.number,
                info.preview,
                info.created_at
            ));
        }
        
        output.push_str("\nğŸ’¡ Use 'voice_input paste <number>' to paste any stack.");
        output
    }
    
    /// Phase 3: ã‚¯ãƒªã‚¢æ©Ÿèƒ½ã®å¼·åŒ–
    pub fn clear_stacks_with_confirmation(&mut self) -> (usize, String) {
        let count = self.stacks.len();
        self.clear_stacks();
        
        let message = if count > 0 {
            format!("âœ… Cleared {} stack(s) from memory.", count)
        } else {
            "ğŸ“ No stacks to clear.".to_string()
        };
        
        (count, message)
    }
}
```

**æ©Ÿèƒ½ç‰¹å¾´**:
- âœ… è¦–è¦šçš„ã«åˆ†ã‹ã‚Šã‚„ã™ã„ä¸€è¦§è¡¨ç¤º
- âœ… ä»¶æ•°ãƒ»çŠ¶æ…‹ã®æ˜ç¤º
- âœ… æ“ä½œã‚¬ã‚¤ãƒ€ãƒ³ã‚¹ã®è¡¨ç¤º
- âœ… ç¢ºèªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ»çµ±è¨ˆæƒ…å ±

#### éæ©Ÿèƒ½è¦ä»¶

##### 1. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶

```rust
// Phase 3: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
impl StackService {
    const MAX_STACKS: usize = 50;           // ãƒ¡ãƒ¢ãƒªä¿è­·
    const MAX_STACK_SIZE: usize = 10_000;   // å¤§å®¹é‡ãƒ†ã‚­ã‚¹ãƒˆåˆ¶é™
    const PREVIEW_LENGTH: usize = 40;       // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æœ€é©åŒ–
    
    /// Phase 3: ã‚¹ã‚¿ãƒƒã‚¯ä¿å­˜æ™‚ã®æœ€é©åŒ–
    pub fn save_stack_optimized(&mut self, text: String) -> Result<u32, StackServiceError> {
        // ã‚µã‚¤ã‚ºãƒã‚§ãƒƒã‚¯
        if text.len() > Self::MAX_STACK_SIZE {
            return Err(StackServiceError::TextTooLarge(text.len()));
        }
        
        // å®¹é‡ãƒã‚§ãƒƒã‚¯ãƒ»è‡ªå‹•å‰Šé™¤
        if self.stacks.len() >= Self::MAX_STACKS {
            self.remove_oldest_stack();
        }
        
        let id = self.next_id;
        let stack = Stack::new(id, text);
        self.stacks.insert(id, stack);
        self.next_id += 1;
        
        Ok(id)
    }
}
```

**æ€§èƒ½æŒ‡æ¨™**:
- âš¡ ã‚¹ã‚¿ãƒƒã‚¯ä¿å­˜: < 1ms
- âš¡ ãƒšãƒ¼ã‚¹ãƒˆå®Ÿè¡Œ: < 100ms
- âš¡ ä¸€è¦§è¡¨ç¤º: < 10ms
- ğŸ§  ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡: < 5MB (50ã‚¹ã‚¿ãƒƒã‚¯æ™‚)

##### 2. ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£è¦ä»¶

```rust
// Phase 3: UXå‘ä¸Šã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°
pub struct UserFeedback;

impl UserFeedback {
    pub fn stack_saved(id: u32, preview: &str) -> String {
        format!("ğŸ“ Stack {} saved: {}", id, preview)
    }
    
    pub fn paste_success(id: u32, chars: usize) -> String {
        format!("âœ… Pasted stack {} ({} characters)", id, chars)
    }
    
    pub fn stack_not_found(id: u32, available: &[u32]) -> String {
        let list = available.iter()
            .map(|n| n.to_string())
            .collect::<Vec<_>>()
            .join(", ");
        format!("âŒ Stack {} not found. Available: [{}]", id, list)
    }
    
    pub fn mode_status(enabled: bool, count: usize) -> String {
        if enabled {
            format!("ğŸŸ¢ Stack mode ON ({} stacks in memory)", count)
        } else {
            "ğŸ”´ Stack mode OFF".to_string()
        }
    }
}
```

**UXè¦ä»¶**:
- ğŸ“± çµµæ–‡å­—ã«ã‚ˆã‚‹è¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
- ğŸ“Š æ“ä½œçµæœã®æ•°å€¤è¡¨ç¤º
- ğŸ§­ æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ¡ˆå†…
- âŒ å»ºè¨­çš„ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

## How

### å†…å®¹

#### ç›®çš„

Phase 2ã§å®Ÿè£…ã•ã‚ŒãŸã‚¹ã‚¿ãƒƒã‚¯æ©Ÿèƒ½ã®åŸºç›¤ã‚’**Production Ready**ãƒ¬ãƒ™ãƒ«ã¾ã§å¼•ãä¸Šã’ã€å®Ÿéš›ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§å®‰å¿ƒã—ã¦ä½¿ç”¨ã§ãã‚‹å“è³ªã‚’ç¢ºç«‹ã™ã‚‹ã€‚

#### æˆæœç‰©ï¼ˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«orãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

**æ—¢å­˜æ©Ÿèƒ½ã®å“è³ªå‘ä¸Š**:
- `src/application/stack_service.rs`: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- `src/bin/voice_inputd.rs`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å¼·åŒ–ãƒ»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°æ”¹å–„
- `src/main.rs`: CLIå‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ”¹å–„

**æ–°è¦ãƒ†ã‚¹ãƒˆå®Ÿè£…**:
- `tests/e2e/stack_workflow_test.rs`: å®Œå…¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼E2Eãƒ†ã‚¹ãƒˆ
- `tests/integration/paste_functionality_test.rs`: ãƒšãƒ¼ã‚¹ãƒˆæ©Ÿèƒ½çµ±åˆãƒ†ã‚¹ãƒˆ
- `tests/unit/stack_service_edge_cases.rs`: ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ»ã‚¨ãƒ©ãƒ¼ç³»ãƒ†ã‚¹ãƒˆ

**å“è³ªä¿è¨¼ãƒ„ãƒ¼ãƒ«**:
- `scripts/phase3-quality-check.sh`: Phase3å“è³ªãƒã‚§ãƒƒã‚¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
- `benches/stack_performance.rs`: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ˆæ¸¬ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯

#### å®Œäº†æ¡ä»¶

**æ©Ÿèƒ½å®Œæˆåº¦**:
- [x] `paste <number>` ãŒå®‰å®šå‹•ä½œï¼ˆPhase2ã§å®Ÿè£…æ¸ˆã¿ï¼‰
- [x] `list-stacks` ãŒè¦‹ã‚„ã™ã„å½¢å¼ã§è¡¨ç¤ºï¼ˆPhase2ã§å®Ÿè£…æ¸ˆã¿ï¼‰
- [x] `clear-stacks` ãŒç¢ºå®Ÿã«å‹•ä½œï¼ˆPhase2ã§å®Ÿè£…æ¸ˆã¿ï¼‰
- [ ] ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã§å»ºè¨­çš„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶ã‚’æº€ãŸã™ï¼ˆè¨ˆæ¸¬å®Œäº†ï¼‰

**å“è³ªä¿è¨¼**:
- [ ] E2Eãƒ†ã‚¹ãƒˆãŒ100%æˆåŠŸ
- [ ] ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆãŒå…¨ã¦æˆåŠŸ
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆãŒåŸºæº–å€¤ã‚¯ãƒªã‚¢
- [ ] `cargo clippy -- -D warnings` ã§warningç„¡ã—
- [ ] æ‰‹å‹•ãƒ†ã‚¹ãƒˆãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆå®Œäº†

#### æ‰‹å‹•ã§ã®ãƒã‚§ãƒƒã‚¯é …ç›®

##### åŸºæœ¬æ“ä½œãƒ•ãƒ­ãƒ¼
- [ ] `voice_input stack-mode on` â†’ æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
- [ ] éŸ³å£°å…¥åŠ›å®Ÿè¡Œ â†’ ã‚¹ã‚¿ãƒƒã‚¯è‡ªå‹•ä¿å­˜ãƒ»ç•ªå·è¡¨ç¤º  
- [ ] `voice_input list-stacks` â†’ åˆ†ã‹ã‚Šã‚„ã™ã„ä¸€è¦§è¡¨ç¤º
- [ ] `voice_input paste 1` â†’ æ­£ç¢ºãªãƒ†ã‚­ã‚¹ãƒˆãƒšãƒ¼ã‚¹ãƒˆå®Ÿè¡Œ
- [ ] `voice_input clear-stacks` â†’ ç¢ºèªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ»ä»¶æ•°è¡¨ç¤º
- [ ] `voice_input stack-mode off` â†’ ãƒ¢ãƒ¼ãƒ‰ç„¡åŠ¹åŒ–ãƒ»ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢

##### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- [ ] å­˜åœ¨ã—ãªã„ç•ªå·ãƒšãƒ¼ã‚¹ãƒˆ â†’ åˆ©ç”¨å¯èƒ½ç•ªå·æ¡ˆå†…
- [ ] ã‚¹ã‚¿ãƒƒã‚¯ãƒ¢ãƒ¼ãƒ‰ç„¡åŠ¹æ™‚ã®ãƒšãƒ¼ã‚¹ãƒˆ â†’ æœ‰åŠ¹åŒ–æ¡ˆå†…
- [ ] ç©ºçŠ¶æ…‹ã§ã®ä¸€è¦§è¡¨ç¤º â†’ ä½¿ã„æ–¹æ¡ˆå†…
- [ ] ç©ºçŠ¶æ…‹ã§ã®ã‚¯ãƒªã‚¢ â†’ é©åˆ‡ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

##### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- [ ] 10å€‹ã®ã‚¹ã‚¿ãƒƒã‚¯ä¿å­˜ â†’ å„1msä»¥å†…
- [ ] å¤§å®¹é‡ãƒ†ã‚­ã‚¹ãƒˆ(5000æ–‡å­—)ãƒšãƒ¼ã‚¹ãƒˆ â†’ 100msä»¥å†…
- [ ] 50ã‚¹ã‚¿ãƒƒã‚¯çŠ¶æ…‹ã§ã®ä¸€è¦§è¡¨ç¤º â†’ 10msä»¥å†…

#### é™¤å¤–é …ç›®ï¼ˆã‚„ã‚‰ãªã„ã“ã¨ï¼‰

- **UIå®Ÿè£…**: Phase 4ã§å®Ÿè£…äºˆå®š
- **æ°¸ç¶šåŒ–æ©Ÿèƒ½**: è¨­è¨ˆæ€æƒ³ã«ã‚ˆã‚Šé™¤å¤–ï¼ˆã‚ªãƒ³ãƒ¡ãƒ¢ãƒªç®¡ç†ï¼‰
- **è¤‡æ•°ãƒšãƒ¼ã‚¹ãƒˆ**: Phase 3ç¯„å›²å¤–
- **ã‚¹ã‚¿ãƒƒã‚¯ç·¨é›†æ©Ÿèƒ½**: Phase 3ç¯„å›²å¤–
- **å¤–éƒ¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå¯¾å¿œ**: Phase 3ç¯„å›²å¤–

### ã‚¿ã‚¹ã‚¯åˆ†å‰²ï¼ˆTDDå½¢å¼ï¼‰

#### Task 1: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–

- [ ] **1-1: ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ”¹å–„ãƒ†ã‚¹ãƒˆä½œæˆ**
  ```rust
  #[test]
  fn test_paste_nonexistent_stack_helpful_message() {
      let mut service = StackService::new();
      service.save_stack("test".to_string());
      
      let result = service.get_stack_with_context(99);
      assert!(result.is_err());
      assert!(result.unwrap_err().to_string().contains("Available: 1"));
  }
  ```

- [ ] **1-2: StackServiceErrorå‹å®šç¾©å®Ÿè£…**
  - `StackNotFound(u32, Vec<u32>)` ã‚¨ãƒ©ãƒ¼å‹
  - `StackModeDisabled` ã‚¨ãƒ©ãƒ¼å‹
  - `TextTooLarge(usize)` ã‚¨ãƒ©ãƒ¼å‹

- [ ] **1-3: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æ”¹å–„å®Ÿè£…**
  - `get_stack_with_context()` ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
  - å»ºè¨­çš„ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”Ÿæˆ
  - åˆ©ç”¨å¯èƒ½ç•ªå·æ¡ˆå†…æ©Ÿèƒ½

#### Task 2: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å‘ä¸Š

- [ ] **2-1: ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ†ã‚¹ãƒˆä½œæˆ**
  ```rust
  #[test]
  fn test_user_feedback_messages() {
      assert_eq!(
          UserFeedback::paste_success(1, 150),
          "âœ… Pasted stack 1 (150 characters)"
      );
  }
  ```

- [ ] **2-2: UserFeedbackãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å®Ÿè£…**
  - çµ±ä¸€çš„ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
  - çµµæ–‡å­—ã«ã‚ˆã‚‹è¦–è¦šçš„æ”¹å–„
  - æ“ä½œã‚¬ã‚¤ãƒ€ãƒ³ã‚¹è¿½åŠ 

- [ ] **2-3: CLIå‡ºåŠ›æ”¹å–„å®Ÿè£…**
  - `main.rs`ã§ã®å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆçµ±ä¸€
  - ã‚«ãƒ©ãƒ¼è¡¨ç¤ºå¯¾å¿œï¼ˆoptionalï¼‰

#### Task 3: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

- [ ] **3-1: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆä½œæˆ**
  ```rust
  #[test]
  fn test_stack_save_performance() {
      let mut service = StackService::new();
      let start = Instant::now();
      
      for i in 0..100 {
          service.save_stack(format!("Test text {}", i));
      }
      
      assert!(start.elapsed() < Duration::from_millis(100));
  }
  ```

- [ ] **3-2: ãƒ¡ãƒ¢ãƒªåˆ¶é™æ©Ÿèƒ½å®Ÿè£…**
  - `MAX_STACKS` å®šæ•°å®šç¾©
  - è‡ªå‹•å‰Šé™¤ãƒ­ã‚¸ãƒƒã‚¯ (`remove_oldest_stack()`)
  - ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ç›£è¦–

- [ ] **3-3: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ˆæ¸¬å®Ÿè£…**
  - ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ç”¨`benches/stack_performance.rs`
  - æ€§èƒ½æŒ‡æ¨™é”æˆç¢ºèª

#### Task 4: åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆå®Ÿè£…

- [ ] **4-1: E2Eãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ†ã‚¹ãƒˆä½œæˆ**
  ```rust
  #[tokio::test]
  async fn test_complete_stack_workflow() {
      // ã‚¹ã‚¿ãƒƒã‚¯ãƒ¢ãƒ¼ãƒ‰æœ‰åŠ¹åŒ– â†’ éŸ³å£°å…¥åŠ› â†’ ç®¡ç† â†’ ãƒšãƒ¼ã‚¹ãƒˆ â†’ ç„¡åŠ¹åŒ–
      // ã®å®Œå…¨ãƒ•ãƒ­ãƒ¼ã‚’ãƒ†ã‚¹ãƒˆ
  }
  ```

- [ ] **4-2: ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆä½œæˆ**
  - å¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆï¼ˆç©ºæ–‡å­—ã€å¤§å®¹é‡æ–‡å­—ï¼‰
  - ä¸¦è¡Œæ€§ãƒ†ã‚¹ãƒˆï¼ˆè¤‡æ•°æ“ä½œåŒæ™‚å®Ÿè¡Œï¼‰
  - ãƒªã‚½ãƒ¼ã‚¹æ¯æ¸‡ãƒ†ã‚¹ãƒˆ

- [ ] **4-3: çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè£…**
  - `paste_functionality_test.rs`: ãƒšãƒ¼ã‚¹ãƒˆæ©Ÿèƒ½ã®åŒ…æ‹¬ãƒ†ã‚¹ãƒˆ
  - `stack_management_test.rs`: ç®¡ç†ã‚³ãƒãƒ³ãƒ‰ã®åŒ…æ‹¬ãƒ†ã‚¹ãƒˆ

#### Task 5: å“è³ªä¿è¨¼ãƒ»ä»•ä¸Šã’

- [ ] **5-1: ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯**
  - `cargo fmt` å®Ÿè¡Œ
  - `cargo clippy -- -D warnings` å®Ÿè¡Œãƒ»ä¿®æ­£
  - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ 

- [ ] **5-2: æ‰‹å‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ**
  - åŸºæœ¬æ“ä½œãƒ•ãƒ­ãƒ¼ãƒã‚§ãƒƒã‚¯
  - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒã‚§ãƒƒã‚¯
  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒã‚§ãƒƒã‚¯

- [ ] **5-3: Phase3å®Œäº†ãƒ¬ãƒãƒ¼ãƒˆä½œæˆ**
  - æ©Ÿèƒ½å®Œæˆåº¦è©•ä¾¡
  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ˆæ¸¬çµæœ
  - æ¬¡ãƒ•ã‚§ãƒ¼ã‚ºæº–å‚™çŠ¶æ³

### æ‰‹å‹•ã§ã®ãƒã‚§ãƒƒã‚¯é …ç›®

#### 1. åŸºæœ¬æ“ä½œç¢ºèªï¼ˆå¿…é ˆï¼‰

**ã‚¹ã‚¿ãƒƒã‚¯ãƒ¢ãƒ¼ãƒ‰åˆ¶å¾¡**:
- [ ] `voice_input stack-mode on` â†’ "ğŸŸ¢ Stack mode enabled" è¡¨ç¤º
- [ ] `voice_input stack-mode off` â†’ "ğŸ”´ Stack mode disabled" è¡¨ç¤º
- [ ] ãƒ¢ãƒ¼ãƒ‰çŠ¶æ…‹ãŒæ­£ç¢ºã«ç®¡ç†ã•ã‚Œã‚‹

**ã‚¹ã‚¿ãƒƒã‚¯ä¿å­˜ãƒ»ç¢ºèª**:
- [ ] éŸ³å£°å…¥åŠ›å®Ÿè¡Œå¾Œ â†’ "ğŸ“ Stack 1 saved: [preview]" è¡¨ç¤º
- [ ] `voice_input list-stacks` â†’ è¦‹ã‚„ã™ã„ä¸€è¦§å½¢å¼è¡¨ç¤º
- [ ] ã‚¹ã‚¿ãƒƒã‚¯ç•ªå·ãƒ»ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»ä½œæˆæ™‚é–“ãŒè¡¨ç¤ºã•ã‚Œã‚‹

**ãƒšãƒ¼ã‚¹ãƒˆæ“ä½œ**:
- [ ] `voice_input paste 1` â†’ ãƒ†ã‚­ã‚¹ãƒˆãŒæ­£ç¢ºã«ãƒšãƒ¼ã‚¹ãƒˆã•ã‚Œã‚‹
- [ ] ãƒšãƒ¼ã‚¹ãƒˆå®Œäº†æ™‚ â†’ "âœ… Pasted stack 1 (XXX characters)" è¡¨ç¤º
- [ ] ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ã•ã‚Œã‚‹

#### 2. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ç¢ºèªï¼ˆé‡è¦ï¼‰

**å­˜åœ¨ã—ãªã„ã‚¹ã‚¿ãƒƒã‚¯**:
- [ ] `voice_input paste 99` â†’ "âŒ Stack 99 not found. Available: [1, 2, 3]" è¡¨ç¤º
- [ ] åˆ©ç”¨å¯èƒ½ãªç•ªå·ãŒæ˜ç¤ºã•ã‚Œã‚‹

**ã‚¹ã‚¿ãƒƒã‚¯ãƒ¢ãƒ¼ãƒ‰ç„¡åŠ¹æ™‚**:
- [ ] ã‚¹ã‚¿ãƒƒã‚¯ãƒ¢ãƒ¼ãƒ‰OFFçŠ¶æ…‹ã§ `voice_input paste 1` â†’ æœ‰åŠ¹åŒ–æ¡ˆå†…è¡¨ç¤º
- [ ] é©åˆ‡ãªæ“ä½œã‚¬ã‚¤ãƒ€ãƒ³ã‚¹ãŒæä¾›ã•ã‚Œã‚‹

**ç©ºçŠ¶æ…‹ã§ã®æ“ä½œ**:
- [ ] ã‚¹ã‚¿ãƒƒã‚¯ç„¡ã—çŠ¶æ…‹ã§ `voice_input list-stacks` â†’ ä½¿ã„æ–¹æ¡ˆå†…è¡¨ç¤º
- [ ] `voice_input clear-stacks` â†’ "ğŸ“ No stacks to clear." è¡¨ç¤º

#### 3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç¢ºèªï¼ˆæ¨å¥¨ï¼‰

**å¿œç­”æ€§èƒ½**:
- [ ] ã‚¹ã‚¿ãƒƒã‚¯ä¿å­˜: ä½“æ„Ÿ1ç§’ä»¥å†…ã«å®Œäº†
- [ ] ãƒšãƒ¼ã‚¹ãƒˆå®Ÿè¡Œ: ä½“æ„Ÿé…å»¶ç„¡ããƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›é–‹å§‹
- [ ] ä¸€è¦§è¡¨ç¤º: å³åº§ã«çµæœè¡¨ç¤º

**å¤§å®¹é‡å‡¦ç†**:
- [ ] é•·æ–‡(1000æ–‡å­—+)ã®éŸ³å£°å…¥åŠ› â†’ æ­£å¸¸ä¿å­˜ãƒ»ãƒšãƒ¼ã‚¹ãƒˆ
- [ ] è¤‡æ•°ã‚¹ã‚¿ãƒƒã‚¯(10å€‹+)ã§ã®ä¸€è¦§è¡¨ç¤º â†’ ã‚¹ãƒ ãƒ¼ã‚ºè¡¨ç¤º

**ãƒ¡ãƒ¢ãƒªåŠ¹ç‡**:
- [ ] å¤§é‡ã‚¹ã‚¿ãƒƒã‚¯ä½œæˆå¾Œã®ã‚¯ãƒªã‚¢ â†’ ãƒ¡ãƒ¢ãƒªè§£æ”¾ç¢ºèª
- [ ] é•·æ™‚é–“ä½¿ç”¨å¾Œã®å‹•ä½œå®‰å®šæ€§

#### 4. ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ç¢ºèªï¼ˆå“è³ªå‘ä¸Šï¼‰

**ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å“è³ª**:
- [ ] æˆåŠŸæ™‚: ç·‘ãƒã‚§ãƒƒã‚¯(âœ…)ãƒ»åˆ†ã‹ã‚Šã‚„ã™ã„èª¬æ˜
- [ ] ã‚¨ãƒ©ãƒ¼æ™‚: èµ¤ãƒãƒ„(âŒ)ãƒ»å»ºè¨­çš„ãªæ¡ˆå†…
- [ ] æƒ…å ±è¡¨ç¤º: çµµæ–‡å­—ãƒ»æ•°å€¤ã«ã‚ˆã‚‹æ˜ç¢ºãªçŠ¶æ³è¡¨ç¤º

**æ“ä½œã‚¬ã‚¤ãƒ€ãƒ³ã‚¹**:
- [ ] åˆå›ä½¿ç”¨è€…ã§ã‚‚æ“ä½œæ–¹æ³•ãŒç†è§£ã§ãã‚‹
- [ ] ã‚¨ãƒ©ãƒ¼æ™‚ã«æ¬¡ã«ã™ã¹ãæ“ä½œãŒæ˜ç¤ºã•ã‚Œã‚‹
- [ ] ãƒ˜ãƒ«ãƒ—æƒ…å ±ãŒé©åˆ‡ã«è¡¨ç¤ºã•ã‚Œã‚‹

### Phase 3 æˆåŠŸåŸºæº–

#### æ©Ÿèƒ½åŸºæº– âœ…
- [x] **åŸºæœ¬ãƒšãƒ¼ã‚¹ãƒˆæ©Ÿèƒ½**: ç•ªå·æŒ‡å®šã§ç¢ºå®Ÿã«ãƒ†ã‚­ã‚¹ãƒˆãƒšãƒ¼ã‚¹ãƒˆï¼ˆPhase2ã§é”æˆï¼‰
- [x] **ã‚¹ã‚¿ãƒƒã‚¯ç®¡ç†**: ä¸€è¦§ãƒ»ã‚¯ãƒªã‚¢ãƒ»çŠ¶æ…‹åˆ¶å¾¡ã®å®Œå…¨å‹•ä½œï¼ˆPhase2ã§é”æˆï¼‰
- [ ] **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: å…¨ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã§å»ºè¨­çš„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- [ ] **ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£**: ç›´æ„Ÿçš„æ“ä½œãƒ»åˆ†ã‹ã‚Šã‚„ã™ã„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

#### å“è³ªåŸºæº–
- [ ] **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸**: E2Eãƒ»çµ±åˆãƒ»å˜ä½“ãƒ†ã‚¹ãƒˆ100%æˆåŠŸ
- [ ] **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: å…¨æ“ä½œãŒæ€§èƒ½åŸºæº–å†…ã§å®Œäº†
- [ ] **å®‰å®šæ€§**: é•·æ™‚é–“ä½¿ç”¨ãƒ»ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã§å®‰å®šå‹•ä½œ
- [ ] **ä¿å®ˆæ€§**: ã‚³ãƒ¼ãƒ‰å“è³ªãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå®Œå‚™

#### Production ReadyåŸºæº–
- [ ] **å®Ÿç”¨æ€§**: æ—¥å¸¸ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§å®Ÿéš›ã«ä½¿ç”¨å¯èƒ½
- [ ] **ä¿¡é ¼æ€§**: ãƒ‡ãƒ¼ã‚¿æå¤±ãƒ»æ“ä½œå¤±æ•—ã®ãƒªã‚¹ã‚¯ãŒæœ€å°åŒ–
- [ ] **æ‹¡å¼µæ€§**: Phase 4 UIå®Ÿè£…ã¸ã®åŸºç›¤ãŒæ•´å‚™
- [ ] **ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“**: åˆå›ä½¿ç”¨è€…ã§ã‚‚è¿·ã‚ãšæ“ä½œå¯èƒ½

### æŠ€è¡“çš„èª²é¡Œã¨å¯¾ç­–

#### 1. text_inputçµ±åˆã®ä¿¡é ¼æ€§å‘ä¸Š

**èª²é¡Œ**: ãƒšãƒ¼ã‚¹ãƒˆå‡¦ç†ã§ã®å¤–éƒ¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é€£æº
**å¯¾ç­–**: 
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–
- ãƒªãƒˆãƒ©ã‚¤æ©Ÿæ§‹å®Ÿè£…
- æ“ä½œç¢ºèªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

#### 2. ãƒ¡ãƒ¢ãƒªç®¡ç†ã®æœ€é©åŒ–

**èª²é¡Œ**: å¤§é‡ã‚¹ã‚¿ãƒƒã‚¯ãƒ»é•·æ™‚é–“ä½¿ç”¨ã§ã®ãƒ¡ãƒ¢ãƒªåŠ¹ç‡
**å¯¾ç­–**:
- MAX_STACKSåˆ¶é™å®Ÿè£…
- è‡ªå‹•å‰Šé™¤ãƒ­ã‚¸ãƒƒã‚¯
- ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ç›£è¦–

#### 3. ä¸¦è¡Œå‡¦ç†ã®å®‰å®šæ€§

**èª²é¡Œ**: è¤‡æ•°æ“ä½œåŒæ™‚å®Ÿè¡Œã§ã®çŠ¶æ…‹æ•´åˆæ€§
**å¯¾ç­–**:
- `Rc<RefCell<>>`ã«ã‚ˆã‚‹é©åˆ‡ãªæ’ä»–åˆ¶å¾¡
- ã‚¢ãƒˆãƒŸãƒƒã‚¯æ“ä½œã®æ´»ç”¨
- ä¸¦è¡Œæ€§ãƒ†ã‚¹ãƒˆå®Ÿè£…

## Phase 3 å®Œäº†å¾Œã®çŠ¶æ…‹

### æ©Ÿèƒ½å®Œæˆåº¦: 95%
- âœ… **åŸºæœ¬æ©Ÿèƒ½**: ã‚¹ã‚¿ãƒƒã‚¯ä¿å­˜ãƒ»ãƒšãƒ¼ã‚¹ãƒˆãƒ»ç®¡ç†æ“ä½œ
- âœ… **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: åŒ…æ‹¬çš„ã‚¨ãƒ©ãƒ¼å¯¾å¿œãƒ»å»ºè¨­çš„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- âœ… **ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£**: ç›´æ„Ÿçš„æ“ä½œãƒ»åˆ†ã‹ã‚Šã‚„ã™ã„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
- â³ **UIæ©Ÿèƒ½**: Phase 4ã§å®Ÿè£…äºˆå®šï¼ˆã‚°ãƒ©ãƒ•ã‚£ã‚«ãƒ«ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼‰

### Phase 4 æº–å‚™å®Œäº†
- ğŸ¯ **APIåŸºç›¤**: UIçµ±åˆã«å¿…è¦ãªå…¨APIãŒæ•´å‚™æ¸ˆã¿
- ğŸ¯ **ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«**: UIè¡¨ç¤ºç”¨ãƒ‡ãƒ¼ã‚¿æ§‹é€ å®Œå‚™
- ğŸ¯ **å®‰å®šæ€§**: Productionç’°å¢ƒã§ã®ä½¿ç”¨ã«ååˆ†ãªå“è³ª

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¾¡å€¤å®Ÿç¾
- ğŸ’¼ **æ¥­å‹™æ´»ç”¨**: éŸ³å£°å…¥åŠ›â†’ç·¨é›†â†’ãƒšãƒ¼ã‚¹ãƒˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®å®Ÿç”¨åŒ–
- âš¡ **åŠ¹ç‡å‘ä¸Š**: æ€è€ƒã¨ãƒ†ã‚­ã‚¹ãƒˆé…ç½®ã®åˆ†é›¢ã«ã‚ˆã‚‹ç”Ÿç”£æ€§å‘ä¸Š
- ğŸ¯ **ä½¿ã„ã‚„ã™ã•**: æŠ€è¡“çš„çŸ¥è­˜ä¸è¦ã®ç›´æ„Ÿçš„æ“ä½œå®Ÿç¾